<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Результаты тестов</title>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
</head>
<body>
  <h2>Все результаты тестов</h2>
  <div id="list"></div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAmTtXSLeksMmRuxlmt19qz60zESOCFGGY",
      authDomain: "manager-test-2b964.firebaseapp.com",
      projectId: "manager-test-2b964",
      storageBucket: "manager-test-2b964.firebasestorage.app",
      messagingSenderId: "769825814408",
      appId: "1:769825814408:web:072ec41246a2d1027b6c3d"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    db.collection("results")
      .orderBy("timestamp", "desc")
      .get()
      .then(snapshot => {
        const list = document.getElementById('list');
        snapshot.forEach(doc => {
          const data = doc.data();
          const div = document.createElement('div');
          div.innerHTML = `<p><strong>${data.firstName} ${data.lastName}</strong> — ${data.level} | Баллы: ${data.score} | ${new Date(data.timestamp.toDate()).toLocaleString()}</p><hr>`;
          list.appendChild(div);
        });
      });
  </script>
</body>

</html>
